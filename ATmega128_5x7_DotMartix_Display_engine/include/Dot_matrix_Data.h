#include <Arduino.h>
#include <avr/pgmspace.h>

const uint8_t FontCharMap[128] = {
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,//
	0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,
	35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,
	67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,
 };

 // column scan patterns

const byte column[2][5] = {
    // u1 Digits 1,4,7
    //   C1         C2         C3         C4         C5
    {B11101111,B11110111,B11111011,B11111101,B11111110},
    // U3 digits 3,6,9
    // C1         C2         C3         C4         C5
    {B10111111,B11011111,B11101111,B11110111,B11111011},
  
    //{B11111101,B11111110,B01111111,B10111111,B11011111}
    
};

// Shared digits 2,5,8 — ALIGNED
  // U3 U1 sher this digit / note u3 bit 7= C3, bit 1= c1, bit 0= c2
    //u2  u1  bit 6 = c4, bit 5=c5, but this the coreect order for 
    //the digit and u3,u1 i did the column bit in order
    //      C1         C2 C3         C4         C5
const byte column_shared_u1[5] = {
    // C1(off)   C2(off)    C3(off)   C4         C5
    B11111111, B11111111, B11111111, B10111111, B11011111
};

const byte column_shared_u3[5] = {
    // C1        C2        C3        C4(off)   C5(off)
    B11111101, B11111110, B01111111, B11111111, B11111111
};





// ASCII 0x20 (space) to 0x7E (~) → 95 chars
// 5 columns per char
// bit7 = R1, bit1 = R7, bit0 unused
const uint8_t DotMatrix_5X7_FontData[95][5] PROGMEM = {

  // 0x20 ' '
  {0x00,0x00,0x00,0x00,0x00},

  // 0x21 '!'
  { 0x00, 0x00, 0xF2, 0x00, 0x00 },

  // 0x22 '"'
  { 0x00, 0xE0, 0x00, 0xE0, 0x00 },

  // 0x23 '#'
  { 0x28, 0xFE, 0x28, 0xFE, 0x28 },

  // 0x24 '$'
  { 0x24, 0x54, 0xFE, 0x54, 0x48 },

  // 0x25 '%'
  { 0xC4, 0xC8, 0x10, 0x26, 0x46 },

  // 0x26 '&'
  { 0x6C, 0x92, 0xAA, 0x44, 0x0A },

  // 0x27 '''
  { 0x00, 0xA0, 0xC0, 0x00, 0x00 },

  // 0x28 '('
  { 0x00, 0x38, 0x44, 0x82, 0x00 },

  // 0x29 ')'
  { 0x00, 0x82, 0x44, 0x38, 0x00 },

  // 0x2A '*'
  { 0x28, 0x10, 0x7C, 0x10, 0x28 },

  // 0x2B '+'
  { 0x10, 0x10, 0x7C, 0x10, 0x10 },

  // 0x2C ','
  { 0x00, 0x0A, 0x0C, 0x00, 0x00 },

  // 0x2D '-'
  { 0x10, 0x10, 0x10, 0x10, 0x10 },

  // 0x2E '.'
  {0x00,0x60,0x60,0x00,0x00},

  // 0x2F '/'
  {0x20,0x10,0x08,0x04,0x02},

  // 0x30–0x39 '0'–'9'
  {0x3E,0x51,0x49,0x45,0x3E},
  {0x00,0x42,0x7F,0x40,0x00},
  {0x42,0x61,0x51,0x49,0x46},
  {0x21,0x41,0x45,0x4B,0x31},
  {0x18,0x14,0x12,0x7F,0x10},
  {0x27,0x45,0x45,0x45,0x39},
  {0x3C,0x4A,0x49,0x49,0x30},
  {0x01,0x71,0x09,0x05,0x03},
  {0x36,0x49,0x49,0x49,0x36},
  {0x06,0x49,0x49,0x29,0x1E},

  // 0x3A–0x40
  {0x00,0x36,0x36,0x00,0x00},
  {0x00,0x56,0x36,0x00,0x00},
  {0x08,0x14,0x22,0x41,0x00},
  {0x14,0x14,0x14,0x14,0x14},
  {0x00,0x41,0x22,0x14,0x08},
  {0x02,0x01,0x51,0x09,0x06},
  {0x32,0x49,0x79,0x41,0x3E},

  // 0x41–0x5A 'A'–'Z'
  {0x7E,0x90,0x90,0x90,0x7E},
  {0x7F,0x49,0x49,0x49,0x36},
  {0x3E,0x41,0x41,0x41,0x22},
  {0x7F,0x41,0x41,0x22,0x1C},
  {0x7F,0x49,0x49,0x49,0x41},
  {0x7F,0x09,0x09,0x09,0x01},
  {0x3E,0x41,0x49,0x49,0x7A},
  {0x7F,0x08,0x08,0x08,0x7F},
  {0x00,0x41,0x7F,0x41,0x00},
  {0x20,0x40,0x41,0x3F,0x01},
  {0x7F,0x08,0x14,0x22,0x41},
  {0x7F,0x40,0x40,0x40,0x40},
  {0x7F,0x02,0x0C,0x02,0x7F},
  {0x7F,0x04,0x08,0x10,0x7F},
  {0x3E,0x41,0x41,0x41,0x3E},
  {0x7F,0x09,0x09,0x09,0x06},
  {0x3E,0x41,0x51,0x21,0x5E},
  {0x7F,0x09,0x19,0x29,0x46},
  {0x46,0x49,0x49,0x49,0x31},
  {0x01,0x01,0x7F,0x01,0x01},
  {0x3F,0x40,0x40,0x40,0x3F},
  {0x1F,0x20,0x40,0x20,0x1F},
  {0x7F,0x20,0x18,0x20,0x7F},
  {0x63,0x14,0x08,0x14,0x63},
  {0x03,0x04,0x78,0x04,0x03},
  {0x61,0x51,0x49,0x45,0x43},

  // 0x5B–0x7E lowercase + symbols
  {0x00,0x7F,0x41,0x41,0x00}, // [
  {0x02,0x04,0x08,0x10,0x20}, // 
  {0x00,0x41,0x41,0x7F,0x00}, // ]
  {0x04,0x02,0x01,0x02,0x04}, // ^
  {0x40,0x40,0x40,0x40,0x40}, // _
  {0x00,0x01,0x02,0x04,0x00}, // `
  {0x20,0x54,0x54,0x54,0x78}, // a
  {0x7F,0x48,0x44,0x44,0x38}, // b
  {0x38,0x44,0x44,0x44,0x20}, // c
    {0x38,0x44,0x44,0x48,0xFE}, // d
 {0x38,0x54,0x54,0x54,0x18}, // e
  {0x08,0x7E,0x09,0x01,0x02}, // f
  {0x0C,0x52,0x52,0x52,0x3E}, // g
  { 0xFE, 0x10, 0x10, 0x10, 0x0E }, // h
  {0x00,0x44,0x7D,0x40,0x00}, // i
  {0x20,0x40,0x44,0x3D,0x00}, // j
  {0x7F,0x10,0x28,0x44,0x00}, // k
  { 0x00, 0x82, 0xFE, 0x02, 0x00 }, // l
  {0x7C,0x04,0x18,0x04,0x78}, // m
  {0x7C,0x08,0x04,0x04,0x78}, // n
  { 0x38, 0x44, 0x44, 0x44, 0x38 }, // o
  {0x7C,0x14,0x14,0x14,0x08}, // p
  {0x08,0x14,0x14,0x18,0x7C}, // q
  {0x7C,0x08,0x04,0x04,0x08}, // r
  {0x48,0x54,0x54,0x54,0x20}, // s
  {0x04,0x3F,0x44,0x40,0x20}, // t
  {0x3C,0x40,0x40,0x20,0x7C}, // u
  {0x1C,0x20,0x40,0x20,0x1C}, // v
  {0x3C,0x40,0x30,0x40,0x3C}, // w
  {0x44,0x28,0x10,0x28,0x44}, // x
  {0x0C,0x50,0x50,0x50,0x3C}, // y
  {0x44,0x64,0x54,0x4C,0x44}, // z
  {0x08,0x36,0x41,0x41,0x00}, // {
  {0x00,0x00,0x7F,0x00,0x00}, // |
  {0x00,0x41,0x41,0x36,0x08}, // }
  {0x08,0x04,0x08,0x10,0x08}, // ~
};