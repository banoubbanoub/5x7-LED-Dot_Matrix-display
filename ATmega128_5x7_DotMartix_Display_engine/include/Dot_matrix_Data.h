#include <Arduino.h>
#include <avr/pgmspace.h>


 // column scan patterns

const byte column[2][5] = {
    // u1 Digits 1,4,7
    //   C1         C2         C3         C4         C5
    {B11101111,B11110111,B11111011,B11111101,B11111110},
    // U3 digits 3,6,9
    // C1         C2         C3         C4         C5
    {B10111111,B11011111,B11101111,B11110111,B11111011},
    
};

// Shared digits 2,5,8 — ALIGNED
  // U3 U1 sher this digit / note u3 bit 7= C3, bit 1= c1, bit 0= c2
    //u2  u1  bit 6 = c4, bit 5=c5, but this the coreect order for 
    //the digit and u3,u1 i did the column bit in order
    //      C1         C2 C3         C4         C5
const byte column_shared_u1[5] = {
    // C1(off)   C2(off)    C3(off)   C4         C5
    B11111111, B11111111, B11111111, B10111111, B11011111
};

const byte column_shared_u3[5] = {
    // C1        C2        C3        C4(off)   C5(off)
    B11111101, B11111110, B01111111, B11111111, B11111111
};





// ASCII 0x20 (space) to 0x7E (~) → 95 chars
// 5 columns per char
// bit7 = R1, bit1 = R7, bit0 unused
const uint8_t DotMatrix_5X7_FontData[95][5] PROGMEM = {

  // 0x20 ' '
  { 0x00, 0x00, 0x00, 0x00, 0x00},

  // 0x21 '!'
  { 0x00, 0x00, 0xF2, 0x00, 0x00 },

  // 0x22 '"'
  { 0x00, 0xE0, 0x00, 0xE0, 0x00 },

  // 0x23 '#'
  { 0x28, 0xFE, 0x28, 0xFE, 0x28 },

  // 0x24 '$'
  { 0x24, 0x54, 0xFE, 0x54, 0x48 },

  // 0x25 '%'
  { 0xC4, 0xC8, 0x10, 0x26, 0x46 },

  // 0x26 '&'
  { 0x6C, 0x92, 0xAA, 0x44, 0x0A },

  // 0x27 '''
  { 0x00, 0xA0, 0xC0, 0x00, 0x00 },

  // 0x28 '('
  { 0x00, 0x38, 0x44, 0x82, 0x00 },

  // 0x29 ')'
  { 0x00, 0x82, 0x44, 0x38, 0x00 },

  // 0x2A '*'
  { 0x28, 0x10, 0x7C, 0x10, 0x28 },

  // 0x2B '+'
  { 0x10, 0x10, 0x7C, 0x10, 0x10 },

  // 0x2C ','
  { 0x00, 0x0A, 0x0C, 0x00, 0x00 },

  // 0x2D '-'
  { 0x10, 0x10, 0x10, 0x10, 0x10 },

  // 0x2E '.'
  { 0x00, 0x06, 0x06, 0x00, 0x00 },

  // 0x2F '/'
  { 0x04, 0x08, 0x10, 0x20, 0x40 },

  // 0x30–0x39 '0'–'9'
  { 0x7C, 0x82, 0x82, 0x82, 0x7C },
  { 0x00, 0x42, 0xFE, 0x02, 0x00 },
  { 0x42, 0x86, 0x8A, 0x92, 0x62 },
  { 0x84, 0x82, 0xA2, 0xD2, 0x8C },
  { 0x18, 0x28, 0x48, 0xFE, 0x08 },
  { 0xE4, 0xA2, 0xA2, 0xA2, 0x9C },
  { 0x3C, 0x52, 0x92, 0x92, 0x0C },
  { 0x80, 0x8E, 0x90, 0xA0, 0xC0 },
  { 0x6C, 0x92, 0x92, 0x92, 0x6C },
  { 0x60, 0x92, 0x92, 0x94, 0x78 },

  // 0x3A–0x40 : ; < = > ? @
  { 0x00, 0x6C, 0x6C, 0x00, 0x00 },
  { 0x00, 0x6A, 0x6C, 0x00, 0x00 },
  { 0x10, 0x28, 0x44, 0x82, 0x00 },
  { 0x28, 0x28, 0x28, 0x28, 0x28 },
  { 0x00, 0x82, 0x44, 0x28, 0x10 },
  { 0x40, 0x80, 0x8A, 0x90, 0x60 },
  { 0x4C, 0x92, 0x9E, 0x82, 0x7C },

  // 0x41–0x5A 'A'–'Z'
  { 0x7E, 0x90, 0x90, 0x90, 0x7E },//A
  { 0xFE, 0x92, 0x92, 0x92, 0x6C },//B
  { 0x7C, 0x82, 0x82, 0x82, 0x44 },//C
  { 0xFE, 0x82, 0x82, 0x44, 0x38 },//D
  { 0xFE, 0x92, 0x92, 0x92, 0x82 },//E
  { 0xFE, 0x90, 0x90, 0x90, 0x80 },//F
  { 0x7C, 0x82, 0x82, 0x92, 0x5E },//G
  { 0xFE, 0x10, 0x10, 0x10, 0xFE },//H
  { 0x00, 0x82, 0xFE, 0x82, 0x00 },//I
  { 0x04, 0x02, 0x82, 0xFC, 0x80 },//J
  { 0xFE, 0x10, 0x28, 0x44, 0x82 },//K
  { 0xFE, 0x02, 0x02, 0x02, 0x02 },//L
  { 0xFE, 0x40, 0x30, 0x40, 0xFE },//M
  { 0xFE, 0x20, 0x10, 0x08, 0xFE },//N
  { 0x7C, 0x82, 0x82, 0x82, 0x7C },//O
  { 0xFE, 0x90, 0x90, 0x90, 0x60 },//P
  { 0x7C, 0x82, 0x8A, 0x84, 0x7A },//Q
  { 0xFE, 0x90, 0x98, 0x94, 0x62 },//R
  { 0x64, 0x92, 0x92, 0x92, 0x4C },//S
  { 0x80, 0x80, 0xFE, 0x80, 0x80 },//T
  { 0xFC, 0x02, 0x02, 0x02, 0xFC },//U
  { 0xF8, 0x04, 0x02, 0x04, 0xF8 },//V
  { 0xFC, 0x02, 0x1C, 0x02, 0xFC },//W
  { 0xC6, 0x28, 0x10, 0x28, 0xC6 },//X
  { 0xC0, 0x20, 0x1E, 0x20, 0xC0 },//Y
  { 0x86, 0x8A, 0x92, 0xA2, 0xC2 },//Z
 
  

  // 0x5B–0x7E lowercase + symbols
  { 0x00, 0xFE, 0x82, 0x82, 0x00 }, // [
  { 0xA8, 0x68, 0x3E, 0x68, 0xA8 }, // *
  { 0x00, 0x82, 0x82, 0xFE, 0x00 }, // ]
  { 0x20, 0x40, 0x80, 0x40, 0x20 }, // ^
  { 0x04, 0x04, 0x04, 0x04, 0x04 }, // _
  { 0x00, 0x80, 0x40, 0x20, 0x00 }, // `
  { 0x04, 0x2A, 0x2A, 0x2A, 0x1E }, // a
  { 0xFE, 0x12, 0x12, 0x12, 0x0C }, // b
  { 0x1C, 0x22, 0x22, 0x22, 0x22 }, // c
  { 0x0C, 0x12, 0x12, 0x12, 0xFC }, // d
  { 0x1C, 0x2A, 0x2A, 0x2A, 0x1A }, // e
  { 0x00, 0x10, 0x7E, 0x90, 0x40 }, // f
  { 0x12, 0x2A, 0x2A, 0x2A, 0x3C }, // g
  { 0xFE, 0x10, 0x10, 0x10, 0x0E }, // h
  { 0x00, 0x00, 0x5E, 0x00, 0x00 }, // i
  { 0x04, 0x02, 0x02, 0xBC, 0x00 }, // j
  { 0x00, 0xFE, 0x08, 0x14, 0x22 }, // k
  { 0x00, 0x82, 0xFE, 0x02, 0x00 }, // l
  { 0x3E, 0x20, 0x1C, 0x20, 0x3E }, // m
  { 0x3E, 0x10, 0x20, 0x20, 0x1E }, // n
  { 0x1C, 0x22, 0x22, 0x22, 0x1C }, // o
  { 0x3E, 0x28, 0x28, 0x28, 0x10 }, // p
  { 0x10, 0x28, 0x28, 0x28, 0x3E }, // q
  { 0x3E, 0x10, 0x20, 0x20, 0x10 }, // r
  { 0x12, 0x2A, 0x2A, 0x2A, 0x24 }, // s
  { 0x20, 0x20, 0xFC, 0x22, 0x24 }, // t
  { 0x3C, 0x02, 0x02, 0x02, 0x3C }, // u
  { 0x38, 0x04, 0x02, 0x04, 0x38 }, // v
  { 0x3C, 0x02, 0x0C, 0x02, 0x3C }, // w
  { 0x22, 0x14, 0x08, 0x14, 0x22 }, // x
  { 0x20, 0x12, 0x0C, 0x10, 0x20 }, // y
  { 0x22, 0x26, 0x2A, 0x32, 0x22 }, // z
  { 0x10, 0x6C, 0x82, 0x82, 0x00 }, // {
  { 0x00, 0x00, 0xEE, 0x00, 0x00 }, // |
  { 0x00, 0x82, 0x82, 0x6C, 0x10 }, // }
  { 0x20, 0x40, 0x40, 0x40, 0x80 }, // ~
};